<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="books.scss">
    <title>index</title>
  </head>

  <body>
    <% if flash[:notice] %>
      <div class="flash-message"><p> <%= notice%> </p></div>
    <% end %>

    <h1>Books</h1>
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Body</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @books.each do |book| %>
          <tr>
            <td><%= book.title %></td>
            <td><%= book.body %></td>
            <td><%= link_to "Show",book_path(book.id),class:"link"%></td>
            <td><%= link_to "Edit",edit_book_path(book.id),class:"link" %></td>
            <td><%= link_to 'Destroy',book_path(book.id), method: :delete,class:"link" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <h2>New book</h2>
    <div class="ellor-message">
      <% if @book.errors.any? %>
        <div class="ellor-title"><%= @book.errors.count %> errors prohibited this book from being saved:</div>
        <ul>
          <div class="ellor-list">
            <% @book.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </div>
        </ul>
      <% end %>
    </div>

    <%= form_with model: @book, url:books_path, method: :post do |f| %>
      <div class="field">
        <label for="book_title" class="error-field">Title</label>
        <%= f.text_field :title %>
      </div>
      <div class="field">
        <label for="book_body" class="error-field">Body</label>
        <%= f.text_area :body %>
      </div>
      <div class="actions">
        <%= f.submit "Create Book" %>
      </div>
    <% end %>

  </body>
</html>